import{a as v}from"./chunk-N47QAT3Z.js";import{a as x,b as P}from"./chunk-6UBBB3Z4.js";import"./chunk-BYXBJQAS.js";import{a as l}from"./chunk-JL43BJ7J.js";import{a as f}from"./chunk-QPM7RCMO.js";import"./chunk-G73ZFE37.js";import{a as d}from"./chunk-DZI5S33S.js";import"./chunk-7QVJUEYK.js";import{a as r}from"./chunk-D7WMKMTL.js";import{d as w}from"./chunk-AKT74HKI.js";function A(e,t,n=" "){for(;e.length<t;)e=n+e;return e}function O(e){return A(String(e),2,"0")}function y(e){return r("svg",{...e,height:e.height||"15",viewBox:"0 0 14 15",fill:"none",children:r("path",{d:"M6.25 14.8212V8.63008H0V7.14421H6.25V0.953125H7.75V7.14421H14V8.63008H7.75V14.8212H6.25Z",fill:"black","fill-opacity":"0.54"})})}function h(e){return r("svg",{...e,height:e.height||"18",viewBox:"0 0 16 18",fill:"none",children:r("path",{d:"M2.525 17.3506C2.10833 17.3506 1.75417 17.2162 1.4625 16.9475C1.17083 16.6787 1.025 16.3524 1.025 15.9685V2.8379H0V1.45573H4.7V0.764648H11.3V1.45573H16V2.8379H14.975V15.9685C14.975 16.337 14.825 16.6595 14.525 16.936C14.225 17.2124 13.875 17.3506 13.475 17.3506H2.525ZM13.475 2.8379H2.525V15.9685H13.475V2.8379ZM5.175 13.9874H6.675V4.79596H5.175V13.9874ZM9.325 13.9874H10.825V4.79596H9.325V13.9874Z",fill:"black","fill-opacity":"0.54"})})}function m(e){let t=e.hour*60+e.minute;return e.amPm==="am"?t:t+12*60}function T(e,t,n){let i=t.split("."),a=e;for(let o=0;o<i.length-1;o++){let s=i[o];if(a.hasOwnProperty(s)||(/^\d+$/.test(i[o+1])?a[s]=[]:a[s]={}),s==="__proto__"||s==="constructor"||s==="prototype")return e;a=a[s]}a[i[i.length-1]]=n}function c(e){if(!l(e))return e;if(Array.isArray(e))return e.filter(n=>n!==void 0);let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=c(e[n]));return t}function M(e){return e==="true"||e==="on"?!0:e==="false"||e==="off"?!1:/^\d+$/g.test(e)?parseInt(e):e[0]==="["?JSON.parse(e):e}function E(e){let t={};return e.forEach((n,i)=>{f(typeof n=="string"),n!==""&&T(t,i,M(n))}),c(t)}function S(e,t){let n=E(e);return f(t(n)),n}var k=[12,1,2,3,4,5,6,7,8,9,10,11],V=P(0,60,5);function L(e){return l(e)&&Object.keys(e).every(t=>g.includes(t)&&Array.isArray(e[t]))}var F={start:{hour:9,minute:0,amPm:"am"},end:{hour:5,minute:0,amPm:"pm"}},g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function U(e,t){let n=m(e.start),i=m(e.end),a=m(t.start),o=m(t.end);return!(n>o||i<a)}function D(e){if(e.length<=1)return!1;let[t,...n]=e;return n.some(i=>U(t,i))?!0:D(n)}function R(e){let t=S(new FormData(e),L);return Object.keys(t).filter(n=>{let i=t[n];return!!i&&D(i)})}function _({name:e,current:t}){return r("select",{name:e,children:k.map(n=>r("option",{value:n,selected:n===t,className:"text-right",children:n}))})}function H({name:e,current:t}){return r("select",{name:e,children:V.map(n=>r("option",{value:n,selected:n===t,className:"text-right",children:O(n)}))})}function W({name:e,current:t}){return r("select",{name:e,children:[r("option",{value:"am",selected:t==="am",children:"am"}),r("option",{value:"pm",selected:t==="pm",children:"pm"})]})}function C({prefix:e,timeWindow:t,addTimeWindow:n,removeTimeWindow:i}){return r("div",{className:"flex justify-between",children:[r("div",{children:[r(_,{name:`${e}.start.hour`,current:t.start.hour}),":",r(H,{name:`${e}.start.minute`,current:t.start.minute}),r(W,{name:`${e}.start.amPm`,current:t.start.amPm}),"\u2014",r(_,{name:`${e}.end.hour`,current:t.end.hour}),":",r(H,{name:`${e}.end.minute`,current:t.end.minute}),r(W,{name:`${e}.end.amPm`,current:t.end.amPm})]}),r("div",{className:"flex items-center",children:[r("button",{type:"button",className:"sz-2 ml-2",title:"add",onClick:()=>{let a=t.end.hour===12?{hour:1,minute:t.end.minute,amPm:t.end.amPm==="am"?"pm":"am"}:{hour:t.end.hour+1,minute:t.end.minute,amPm:t.end.amPm};n({start:t.end,end:a})},children:r(y,{})}),i&&r("button",{type:"button",className:"sz-2 ml-2",title:"remove",onClick:i,children:r(h,{})})]})]})}function I({day:e,timeWindows:t}){let[n,i]=d(!!t.length),[a,o]=d(t.length?t:[F]),s=p=>o([...a,p]);return r(w,{children:[r("div",{className:"pt-4 text-sm font-medium leading-6 text-gray-900 w-max",children:r("label",{className:"flex gap-1",children:[r("input",{type:"checkbox",checked:n,onChange:()=>i(!n)}),e.slice(0,3)]})}),r("div",{className:"pt-4 text-sm leading-6 text-gray-700 flex-col gap-8",children:n?a.map((p,u)=>r(C,{prefix:`${e}.${u}`,timeWindow:p,addTimeWindow:s,removeTimeWindow:()=>{if(u===0&&a.length===1)return i(!1);let b=[...a];b.splice(u,1),o(b)}},u)):r("span",{className:"text-gray-400 ml-3",children:"Unavailable"})})]})}function $({availability:e}){let[t,n]=d([]);return r("form",{method:"POST",className:"container p-1",onSubmit:i=>{let a=R(i.currentTarget);n(a),a.length&&i.preventDefault()},children:[r("div",{className:"py-6 grid gap-4 px-0 divide-y divide-gray-100",style:{gridTemplateColumns:"max-content 1fr"},children:g.map(i=>r(I,{day:i,timeWindows:e[i]},i))}),t.length?r(x,{title:"Time Slots Overlap",onConfirm:()=>n([]),message:`There are some overlapping time slots on the following days, please update them accordingly: ${t.join(", ")}`}):null,r(v,{})]})}export{$ as default};
