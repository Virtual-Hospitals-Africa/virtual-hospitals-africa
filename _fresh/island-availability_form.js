import{a as x}from"./chunk-2N4OTQVC.js";import{a as b,b as v}from"./chunk-6UBBB3Z4.js";import{a as w}from"./chunk-FKUAOK4K.js";import{a as c}from"./chunk-QPM7RCMO.js";import"./chunk-G73ZFE37.js";import{a as d}from"./chunk-DZI5S33S.js";import"./chunk-7QVJUEYK.js";import{a as n}from"./chunk-D7WMKMTL.js";import{d as T}from"./chunk-AKT74HKI.js";function N(e,t,r=" "){for(;e.length<t;)e=r+e;return e}function P(e){return N(String(e),2,"0")}function p(e){return n("svg",{...e,height:e.height||"15",viewBox:"0 0 14 15",fill:"none",children:n("path",{d:"M6.25 14.8212V8.63008H0V7.14421H6.25V0.953125H7.75V7.14421H14V8.63008H7.75V14.8212H6.25Z",fill:"black","fill-opacity":"0.54"})})}function f(e){return n("svg",{...e,height:e.height||"18",viewBox:"0 0 16 18",fill:"none",children:n("path",{d:"M2.525 17.3506C2.10833 17.3506 1.75417 17.2162 1.4625 16.9475C1.17083 16.6787 1.025 16.3524 1.025 15.9685V2.8379H0V1.45573H4.7V0.764648H11.3V1.45573H16V2.8379H14.975V15.9685C14.975 16.337 14.825 16.6595 14.525 16.936C14.225 17.2124 13.875 17.3506 13.475 17.3506H2.525ZM13.475 2.8379H2.525V15.9685H13.475V2.8379ZM5.175 13.9874H6.675V4.79596H5.175V13.9874ZM9.325 13.9874H10.825V4.79596H9.325V13.9874Z",fill:"black","fill-opacity":"0.54"})})}function s(e){let t=e.hour*60+e.minute;return e.amPm==="am"?t:t+12*60}function y(e,t,r){let i=t.split("."),a=e;for(let o=0;o<i.length-1;o++){let m=i[o];if(a.hasOwnProperty(m)||(/^\d+$/.test(i[o+1])?a[m]=[]:a[m]={}),m==="__proto__"||m==="constructor"||m==="prototype")return e;a=a[m]}a[i[i.length-1]]=r}function A(e){return e==="true"||e==="on"?!0:e==="false"||e==="off"?!1:/^\d+$/g.test(e)?parseInt(e):e[0]==="["?JSON.parse(e):e}function M(e){let t={};return e.forEach((r,i)=>{c(typeof r=="string"),r!==""&&y(t,i,A(r))}),t}function S(e,t){let r=M(e);return c(t(r)),r}var O=[12,1,2,3,4,5,6,7,8,9,10,11],k=v(0,60,5);function C(e){return w(e)&&Object.keys(e).every(t=>h.includes(t)&&Array.isArray(e[t]))}var V={start:{hour:9,minute:0,amPm:"am"},end:{hour:5,minute:0,amPm:"pm"}},h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function I(e,t){let r=s(e.start),i=s(e.end),a=s(t.start),o=s(t.end);return!(r>o||i<a)}function F(e){if(e.length<=1)return!1;let[t,...r]=e;return r.some(i=>I(t,i))?!0:F(r)}function W(e){let t=S(new FormData(e),C);return Object.keys(t).filter(r=>{let i=t[r];return!!i&&F(i)})}function _({name:e,current:t}){return n("select",{name:e,children:O.map(r=>n("option",{value:r,selected:r===t,className:"text-right",children:r}))})}function D({name:e,current:t}){return n("select",{name:e,children:k.map(r=>n("option",{value:r,selected:r===t,className:"text-right",children:P(r)}))})}function H({name:e,current:t}){return n("select",{name:e,children:[n("option",{value:"am",selected:t==="am",children:"am"}),n("option",{value:"pm",selected:t==="pm",children:"pm"})]})}function $({prefix:e,timeWindow:t,addTimeWindow:r,removeTimeWindow:i}){return n("div",{className:"flex justify-between",children:[n("div",{children:[n(_,{name:`${e}.start.hour`,current:t.start.hour}),":",n(D,{name:`${e}.start.minute`,current:t.start.minute}),n(H,{name:`${e}.start.amPm`,current:t.start.amPm}),"\u2014",n(_,{name:`${e}.end.hour`,current:t.end.hour}),":",n(D,{name:`${e}.end.minute`,current:t.end.minute}),n(H,{name:`${e}.end.amPm`,current:t.end.amPm})]}),n("div",{className:"flex items-center",children:[n("button",{type:"button",className:"sz-2 ml-2",title:"add",onClick:()=>{let a=t.end.hour===12?{hour:1,minute:t.end.minute,amPm:t.end.amPm==="am"?"pm":"am"}:{hour:t.end.hour+1,minute:t.end.minute,amPm:t.end.amPm};r({start:t.end,end:a})},children:n(p,{})}),i&&n("button",{type:"button",className:"sz-2 ml-2",title:"remove",onClick:i,children:n(f,{})})]})]})}function E({day:e,timeWindows:t}){let[r,i]=d(!!t.length),[a,o]=d(t.length?t:[V]),m=l=>o([...a,l]);return n(T,{children:[n("div",{className:"pt-4 text-sm font-medium leading-6 text-gray-900 w-max",children:n("label",{className:"flex gap-1",children:[n("input",{type:"checkbox",checked:r,onChange:()=>i(!r)}),e.slice(0,3)]})}),n("div",{className:"pt-4 text-sm leading-6 text-gray-700 flex-col gap-8",children:r?a.map((l,u)=>n($,{prefix:`${e}.${u}`,timeWindow:l,addTimeWindow:m,removeTimeWindow:()=>{if(u===0&&a.length===1)return i(!1);let g=[...a];g.splice(u,1),o(g)}},u)):n("span",{className:"text-gray-400 ml-3",children:"Unavailable"})})]})}function J({availability:e}){let[t,r]=d([]);return n("form",{method:"POST",className:"container p-1",onSubmit:i=>{let a=W(i.currentTarget);r(a),a.length&&i.preventDefault()},children:[n("div",{className:"px-4 py-6 grid gap-4 px-0 divide-y divide-gray-100",style:{gridTemplateColumns:"max-content 1fr"},children:h.map(i=>n(E,{day:i,timeWindows:e[i]},i))}),t.length?n(b,{title:"Time Slots Overlap",onConfirm:()=>r([]),message:`There are some overlapping time slots on the following days, please update them accordingly: ${t.join(", ")}`}):null,n(x,{})]})}export{J as default};
