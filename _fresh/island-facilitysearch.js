import{c as h,d as g,h as _}from"./chunk-Z5ZZXA55.js";import{a as t}from"./chunk-QPM7RCMO.js";import"./chunk-XBB34SOY.js";import{g as S}from"./chunk-E36SNTQA.js";import"./chunk-HO4JABHR.js";import"./chunk-FB5V53QR.js";import"./chunk-G73ZFE37.js";import{a as n,b as c,e as f}from"./chunk-DZI5S33S.js";import"./chunk-7QVJUEYK.js";import{a as r}from"./chunk-D7WMKMTL.js";import"./chunk-AKT74HKI.js";function R({href:v,name:d,label:b,required:I,value:i}){let[F,$]=n(!1),[l,p]=n(null),[y,k]=n([]),[o,m]=n(""),[w]=n({delay:_(m,220)}),u=f(()=>{$(document.activeElement===document.querySelector(`input[name="${d}_display_name"]`))},[]);c(()=>(u(),self.addEventListener("click",u),()=>self.removeEventListener("click",u))),c(()=>{fetch(`${v}?search=${o}`,{headers:{accept:"application/json"}}).then(async e=>{let a=await e.json();console.log("facilities",a),t(Array.isArray(a)),t(a.every(s=>s&&typeof s=="object")),t(a.every(s=>s.id&&typeof s.id=="number")),t(a.every(s=>s.address&&typeof s.address=="string")),t(a.every(s=>s.display_name&&typeof s.display_name=="string")),k(a)}).catch(console.error)},[o]),c(()=>{i&&(m(i.display_name),p(i))},[i?.id]);let E=F&&y.length>0&&l?.display_name!==o;return r("div",{className:"w-full",children:[r(S,{name:`${d}_display_name`,value:o,required:I,label:b,onInput:e=>{t(e.target),t("value"in e.target),t(typeof e.target.value=="string"),w.delay(e.target.value)},children:E&&r(g,{className:"max-w-sm",children:y.map(e=>r(h,{facility:e,isSelected:l?.id===e.id,onSelect:()=>{p(e),m(e.display_name)}}))})}),l&&r("input",{type:"hidden",name:`${d}_id`,value:l.id})]})}export{R as default};
